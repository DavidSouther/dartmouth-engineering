md-content
  md-toolbar.md-whiteframe-z1.toolbar
    section(layout="row", layout-align="space-around")
      md-content.md-padding(
        flex="33"
        layout="column",
        layout-align="left center",
      )
        div.supported-weight-label
          | Applied&nbsp;Load
          br
          span.material-property-value {{ simulation.applied | number:0}}
          | &nbsp;kN/m
        md-slider.md-primary(
          aria-label="Applied Load in kilonewtons per meter."
          ng-model="simulation.applied",
          step="0.5",
          min="0",
          max="250"
        )
        //- div.supported-weight-label
        //-   md-button(ng-click="simulation.applied = 10") Empty
        //-   md-button(ng-click="simulation.applied = 5000") Cars
        //-   md-button(ng-click="simulation.applied = 30000") Semis
        //-   md-button(ng-click="simulation.applied = 45000") Train
      md-content.md-padding(
        flex="33"
        layout="column",
        layout-align="left center",
      )
        div.supported-weight-label
          | Height
          br
          span.material-property-value {{ simulation.height | number:0}}
          | m
        md-slider.md-primary(
          aria-label="Arch height, in meters."
          ng-model="simulation.height",
          min="10",
          max="200",
          step="1"
        )
        //- div.supported-weight-label
        //-   md-button(ng-click="simulation.height = 50") Small
        //-   md-button(ng-click="simulation.height = 250") Large
        //-   md-button(ng-click="simulation.height = 600") Mega
      md-content.md-padding(
        flex="33"
        layout="column",
        layout-align="left center",
      )
        div.supported-weight-label
          | Span
          br
          span.material-property-value {{ simulation.span | number:0}}
          | m
        md-slider.md-primary(
          aria-label="Arch span, in meters."
          ng-model="simulation.span",
          min="30",
          max="400",
          step="1"
        )
        //- div.supported-weight-label
        //-   md-button(ng-click="simulation.span = 50") Small
        //-   md-button(ng-click="simulation.span = 250") Large
        //-   md-button(ng-click="simulation.span = 600") Mega
  div(
    layout="row",
    layout-align="space-around"
  )
    md-content.md-padding(
      flex="30",
      layout="column"
    )
      div(flex="25", layout="column")
        md-button.md-raised.md-warn
          b Compressive:
          | &nbsp;{{ force.horizontal() | number:0 }}&nbsp;kN
        | This is the horizontal reaction force at the base or support point of the arch. The horizontal force is equal to the internal compressive force, C, for an arch with a funicular form.
      div(flex, layout="column")
        md-button.md-raised.md-accent
          b Vertical:
          | &nbsp;{{ force.vertical() | number:0 }}&nbsp;kN
        | This is the vertical reaction force at the base or support point of the arch. The vertical force must balance out the applied load.
      div(flex)
    div(flex, layout="row", layout-align="center center")
      svg(
        height="400px"
        width="400px"
        graph-scales="{\
          x: ['linear', -250, 250], \
          y: ['linear', 450, -50], \
          rx: ['linear', 0, 500, 0, 400], \
          ry: ['linear', 0, 750, 0, 400], \
          ax: ['linear', 0, force.horizontal.max, 10, 45],\
          ay: ['linear', 0, force.vertical.max, 5, 45],\
          applied: ['linear', 0, 450, 1, 17]\
        }"
      )
        g#arch
          path(
            stroke="black"
            stroke-width="1px"
            fill="lightgrey"
            ng-attr-d="\
              M{{ $scales.x(-simulation.span / 2) }} {{ $scales.y(0) }}\
              A {{ $scales.rx(simulation.span / 2) }} {{ $scales.ry(simulation.height) }}\
                0, 0, 1, \
                {{ $scales.x(simulation.span / 2) }} {{ $scales.y(0) }}\
              L{{ $scales.x(simulation.span / 2 * .9) }} {{ $scales.y(0) }}\
              A{{ $scales.rx(simulation.span / 2 * .9) }} {{ $scales.ry(simulation.height * .9) }}\
                0, 0, 0, \
                {{ $scales.x(-simulation.span / 2 * .9) }} {{ $scales.y(0) }}\
              Z\
            "
          )
        g#arrows
          g#applied_arrows
            arrow(
              ng-repeat="a in forall($scales.applied(simulation.span))"
              color="'green'"
              rotation="90"
              tip="[$scales.x((-simulation.span / 2) + ($index * simulation.span / Math.floor($scales.applied(simulation.span)))), $scales.y(simulation.height/3)]"
              length="$scales.applied(simulation.applied)"
            )
            path(
              stroke="green"
              stroke-width="1px"
              ng-attr-d="\
                M{{ $scales.x(-simulation.span / 2) }} {{ $scales.y(simulation.height/3) }}\
                L{{ $scales.x( simulation.span / 2) }} {{ $scales.y(simulation.height/3) }}\
              "
            )
            path(
              stroke="green"
              stroke-width="1px"
              ng-attr-d="\
                M{{ $scales.x(-simulation.span / 2) }} {{ $scales.y(simulation.height/3) - $scales.applied(simulation.applied) }}\
                L{{ $scales.x( simulation.span / 2) }} {{ $scales.y(simulation.height/3) - $scales.applied(simulation.applied) }}\
              "
            )
          arrow(
            color="'rgb(244,67,54)'"
            rotation="0"
            tip="[$scales.x(-simulation.span / 2), $scales.y(0)]"
            length="$scales.ax(force.compressive())"
          )
          arrow(
            color="'rgb(68,138,255)'"
            rotation="-90"
            tip="[$scales.x(-simulation.span / 2), $scales.y(0)]"
            length="$scales.ay(force.vertical())"
          )
          arrow(
            color="'rgb(244,67,54)'"
            rotation="180"
            tip="[$scales.x(0), $scales.y(simulation.height/3 * 0.9)]"
            length="$scales.ax(force.compressive())"
          )
